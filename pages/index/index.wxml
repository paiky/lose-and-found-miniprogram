<!--index.wxml-->
<view class="header">
	<!-- <view class="avatar">
		<open-data type="userAvatarUrl"></open-data>
	</view> -->
	<image class="avatar" src="{{avatarUrl}}" wx:if="{{hasLogin}}"></image>
	<image class="avatar" src="/icon/user.svg" wx:else></image>
	<view class="input-view">
		<image src="/icon/search.svg"></image>
		<input type="text" placeholder="搜索内容" bindtap="clickSearch" disabled></input>
	</view>
	<view class="add">
		<image src="/icon/add.svg" bindtap="clickPublic"></image>
	</view>
	<view class="email">
		<image src="/icon/email_yes.svg" bindtap="clickMessage"></image>
		<i wx:if="{{unread && hasLogin}}">{{unreply+unChatCount}}</i>
	</view>
</view>
<view class="main-tab">
	<view class="{{tab_index == 0 ? 'tab-active':''}}" data-index="0" catchtap="clickTab">全部</view>
	<view class="{{tab_index == 1 ? 'tab-active':''}}" data-index="1" catchtap="clickTab">寻物</view>
	<view class="{{tab_index == 2 ? 'tab-active':''}}" data-index="2" catchtap="clickTab">招领</view>
	<!-- <view class="{{tab_index == 3 ? 'tab-active':''}}" data-index="3" catchtap="clickTab">分类</view> -->
</view>
<swiper style="height:{{windowHeight-90}}px" bindchange="tabChange" current="{{tab_index}}">

	<swiper-item>
		<scroll-view style="height:100%" class="main-content" scroll-y bindscrolltolower="reactBottom" scroll-with-animation
			refresher-enabled bindrefresherrefresh="onRefresh" refresher-threshold="{{100}}"
			refresher-triggered="{{triggered}}">
			<block wx:for="{{goods[0]}}" wx:key="index">
				<view class="main-content-view" bindtap="clickDetail" data-modal="{{item.goods.id}}">
					<view class="main-content-header">
						<text class="main-content-title">{{item.goods.title}}</text>
						<view class="{{item.goods.status==0?'lose':'found'}}">{{item.goods.status==0?'寻':'领'}}</view>
					</view>
					<view class="main-content-main">
						<view class="main-content-main-left" style="{{item.goods.contentImage?'width:70%':'width:100%'}}">
							<view class="main-content-main-left-author">
								<image src="{{item.headImg}}" catchtap="clickHeadImg" data-modal="{{item.headImg}}"></image>
								<text>{{item.userName}}</text>
							</view>
							<view class="main-content-main-left-content">
								{{item.goods.text}}
							</view>
						</view>
						<view class="main-content-main-right" wx:if="{{item.goods.contentImage}}">
							<image mode="aspectFill" class="main-content-main-right-image" src="{{item.goods.contentImage}}" catchtap="clickCover" data-modal="{{item.goods.contentImage}}"></image>
						</view>
					</view>
					<view class="main-content-footer">
						<text>发布于{{item.goods.pubTime}}</text>
					</view>
				</view>
			</block>
			<!-- <view class="loadmore" hidden="{{loadmore}}">
				正在加载
			</view> -->
		</scroll-view>
	</swiper-item>

	<swiper-item>
		<scroll-view style="height:100%" class="main-content" scroll-y bindscrolltolower="reactBottom" scroll-with-animation
			refresher-enabled bindrefresherrefresh="onRefresh" refresher-threshold="{{100}}"
			refresher-triggered="{{triggered}}">
			<block wx:for="{{goods[1]}}" wx:key="index">
				<view class="main-content-view" bindtap="clickDetail" data-modal="{{item.goods.id}}">
					<view class="main-content-header">
						<text class="main-content-title">{{item.goods.title}}</text>
						<view class="lose">寻</view>
					</view>
					<view class="main-content-main">
						<view class="main-content-main-left" style="{{item.goods.contentImage?'width:70%':'width:100%'}}">
							<view class="main-content-main-left-author">
								<image src="{{item.headImg}}" catchtap="clickHeadImg" data-modal="{{item.headImg}}"></image>
								<text>{{item.userName}}</text>
							</view>
							<view class="main-content-main-left-content">
								{{item.goods.text}}
							</view>
						</view>
						<view class="main-content-main-right" wx:if="{{item.goods.contentImage}}">
							<image mode="aspectFill" class="main-content-main-right-image" src="{{item.goods.contentImage}}" catchtap="clickCover" data-modal="{{item.goods.contentImage}}"></image>
						</view>
					</view>
					<view class="main-content-footer"></view>
				</view>
			</block>
			<!-- <view class="loadmore" hidden="{{loadmore}}">
				正在加载
			</view> -->
		</scroll-view>
	</swiper-item>

	<swiper-item>
		<scroll-view style="height:100%" class="main-content" scroll-y bindscrolltolower="reactBottom" scroll-with-animation
			refresher-enabled bindrefresherrefresh="onRefresh" refresher-threshold="{{100}}" lower-threshold="10"
			refresher-triggered="{{triggered}}">
			<block wx:for="{{goods[2]}}" wx:key="index">
				<view class="main-content-view" bindtap="clickDetail" data-modal="{{item.goods.id}}">
					<view class="main-content-header">
						<text class="main-content-title">{{item.goods.title}}</text>
						<view class="found">领</view>
					</view>
					<view class="main-content-main">
						<view class="main-content-main-left" style="{{item.goods.contentImage?'width:70%':'width:100%'}}">
							<view class="main-content-main-left-author">
								<image src="{{item.headImg}}" catchtap="clickHeadImg" data-modal="{{item.headImg}}"></image>
								<text>{{item.userName}}</text>
							</view>
							<view class="main-content-main-left-content">
								{{item.goods.text}}
							</view>
						</view>
						<view class="main-content-main-right" wx:if="{{item.goods.contentImage}}">
							<image mode="aspectFill" class="main-content-main-right-image" src="{{item.goods.contentImage}}" catchtap="clickCover" data-modal="{{item.goods.contentImage}}"></image>
						</view>
					</view>
					<view class="main-content-footer"></view>
				</view>
			</block>
			<!-- <view class="loadmore" hidden="{{loadmore}}">
				正在加载
			</view> -->
		</scroll-view>
	</swiper-item>
</swiper>